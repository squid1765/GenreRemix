/*! jstag v3.1.1 Bundled 2025-09-23 */
(function(){"use strict";const B="__lytics__jstag__",A=window,$=A.document;function j(e,o,t){let s=-1;const n=e.length;for(arguments.length===2&&n&&(t=e[++s]);++s<n;)t=o(t,e[s],s,e);return t}function L(e,o){return j(e,function(t,s,n){return o(s,n,e)&&t.push(s),t},[])}function z(e,o){return j(e,function(t,s,n){return t.push(o(s,n,e)),t},[])}const Ue=(function(){const o=$.getElementsByTagName("script"),t=[].slice.call(o),s=$.getElementsByTagName("meta"),n=[].slice.call(s),a=L(z(t.concat(n),function(r){return r.getAttribute("data-lytics-global")}),Boolean);if(a.length>1)throw new Error("This page specified more than one data-lytics-global attribute. You should put the attribute on either a meta tag, or the script element itself, but not both");return a.length===1?a[0]:"jstag"})();function te(e,o,t){const s=document.createElement("script");s.async=!0,s.src=e,s.onload=o,s.onerror=t;const n=document.getElementsByTagName("script")[0],a=n&&n.parentNode||document.head||document.body,r=n||a.lastChild;return r!=null?a.insertBefore(s,r):a.appendChild(s),this}function P(e,o){for(let t=0,s=e.length;t<s;t++)o(e[t],t,e)}function we(e){const o=[];for(const t in e)o.push(t);return o}const M=Object.keys||function(o){return L(we(o),function(t){return{}.hasOwnProperty.call(o,t)})};function T(...e){return j(e,(o,t)=>(t===void 0||P(M(t),s=>{o[s]=t[s]}),o))}class dt{constructor(o){this.instance=o.instance}ns(o){return this.namespace=o,this}expose(o){T(this.instance,o),P(M(o),t=>{Ds.util.method(t)})}hold(o){T(this.constructor.prototype,o)}}function Ne(e){return e(new dt({instance:this}),this,this.config)}function D(...e){let o;for(let t=0,s=e.length;t<s;t++)try{return e[t](o)}catch(n){o=n}}const ut=A.top,ft=A.parent;function pt(){return D(function(){return ut.document.referrer},function(){return ft.document.referrer},function(){return $.referrer})}function H(e,o,t=$){return T(t.createElement(e),o)}function ht(e){return e.protocol+"//"+e.hostname+mt(e)}function mt(e){return e.port==null||e.protocol==="https:"&&e.port==="443"||e.protocol==="http:"&&e.port==="80"?"":":"+e.port}const de=A.location;function V(e){return j(e,function(o,t){return o[t[0]]=t[1],o},{})}function Ee(e){return typeof e=="string"}function Y(e){const o=H("a",{href:e}),t=L(we(o),function(n){const a=D(function(){return o[n]});return a==null?!1:Ee(a)}),s=V(z(t,function(n){return[n,o[n]]}));return(s.protocol===""||s.protocol===":")&&(s.protocol=de.protocol),s.origin==null&&(s.origin=ht(s)),s}const Re=A.decodeURIComponent;function ke(e){return{}.toString.call(e)==="[object Array]"}function Fe(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function ue(e){const o={};return typeof e!="string"||(e=Fe(e).replace(/^(\?|#|&)/,""),!e)||P(e.split("&"),function(t){const s=t.replace(/\+/g," ").split("=");let n=s.shift(),a=s.length>0?s.join("="):void 0;n=Re(n),a=a===void 0?null:Re(a),o[n]===void 0?o[n]=a:ke(o[n])?o[n].push(a):o[n]=[o[n],a]}),o}function oe(){return"u_"+Math.floor(Math.random()*1e18)}function yt(e,o){for(let t=0,s=e.length;t<s;t++)if(e[t]===o)return t;return-1}function R(e,o){return yt(e,o)!==-1}class bt{constructor(o){this.register=[],P(o,t=>{this.sign(t)})}sign(o){return R(this.register,o)?!1:(this.register.push(o),!0)}}function je(e){return Me(e,[],new bt([e]))}class ze{constructor(o){this.content=o}}function K(e){return new ze(e)}class se{constructor(o){this.path=o,this.leaf=o[o.length-1]}parent(o){const t=this.path;let s=o;for(let n=0,a=t.length-1;n<a;n++)if(s=s[t[n]],s==null)return s;return s}has(o){const t=this.parent(o);return t&&this.leaf in t}get(o){if(this.path.length===0)return o;const t=this.parent(o);return t==null?t:t[this.leaf]}set(o,t){const s=this.parent(o);return s==null?s:s[this.leaf]=t}copy(o,t){const s=this.shimParent(o,t);return s==null?s:this.set(o,this.get(t))}shimParent(o,t){const s=this.path;if(s.length==1)return o;let n;for(let a=0,r=s.length;a<r;a++){const l=new se(s.slice(0,a));n=l.get(o);const i=l.get(t);n==null&&(n=l.set(o,Array.isArray(i)?[]:{}))}return n}}class gt extends se{set(o,t){super.set(o,t.content)}}function Me(e,o,t){return j(M(e),(s,n)=>{const a=e[n],r=o.concat(n);return wt(a)?s.push(new se(r)):a instanceof ze?s.push(new gt(r)):t.sign(a)&&s.push(...Me(a,r,t)),s},[])}function wt(e){if(e==null||typeof e!="object"&&typeof e!="function")return!0;for(const o in e)if({}.hasOwnProperty.call(e,o))return!1;return!0}function ne(e){return j(M(e),function(o,t){return o.push([t,e[t]]),o},[])}function Et(e,o){return j(e,(t,s,n)=>(t[o(s,n,e)?0:1].push(s),t),[[],[]])}function Pe(e,o){return V(L(ne(e),o))}function kt(e,o){return z(Et(ne(e),o),V)}function _e(e,o){return e.indexOf(o)===0}function Ge(e,o){return Be(e,"channel"),Be(o,"namespace"),e===o?!0:_e(e,`${o}.`)}function Be(e,o){if(e==null)throw new Error(`You must provide a ${o} (\`${String(e)}\` was passed instead)`)}const J=A.encodeURIComponent;function Ve(e){return e&&typeof e=="object"}function ve(e){return typeof e=="function"}function Ke(e){if(!(typeof e=="object"&&e!==null&&""+e=="[object Object]"))return!1;if(Object.getPrototypeOf(e)===null)return!0;let o=e;for(;Object.getPrototypeOf(o)!==null;)o=Object.getPrototypeOf(o);return Object.getPrototypeOf(e)===o}function ae(e,o=!0,t=!0,s="",n=!1){const a=[];return Ve(e)?ke(e)?(t||a.push(s+"_len="+e.length,s+"_json="+J(JSON.stringify(e))),P(e,function(r){a.push(ae(r,o,t,s,n))})):(!o||Ke(e))&&P(M(e),function(r){let l=J(r);const i=e[r];ve(i)||(s!==""&&(l=[s,l].join(".")),Ve(i)?a.push(ae(i,o,t,n?r:l,n)):(Ee(i)&&i.length>0||i!=null)&&a.push(l+"="+J(i)))}):a.push(s+"="+e),a.filter(Boolean).join("&")}function qe(e,o=!1,t=!1,s=""){return ae(e,o,t,s,!1)}const Se="3.1.1",We="seerid",Pt="seerses";function _t(e,o,t){e.ns("config"),e.hold({defaults(l){if(this.namespace==null)throw new Error("You need to claim a namespace before setting defaults!");const[i,c]=kt(l,([f])=>Ge(this.namespace,f));a(i,n(i)),a(c,n(c));for(const f in c)e.carp(`Setting config options out of namespace is not currently supported as well as we'd like! \`${f}\``)}});const s=[];e.hold({bogart(...l){s.push(...l)},ns(l){if(R(s,l))throw new Error(`Cannot use contested namespace: \`${l}\``);return this.bogart(l),this.namespace=l,this}});function n(l){return i=>{i.has(t)||i.copy(t,l)}}function a(l,i){P(je(l),i)}const r={url:"https://c.lytics.io",location:de.href,payloadQueue:[],id:void 0,cid:void 0,loadid:!1,serializer:qe,delay:2e3,blocked:!1,path:"/c/",idpath:"/cid/",cookie:We,sesname:Pt,stream:void 0,sessecs:1800,qsargs:[],tagid:"jstag-csdk",pagedata:{},byFieldKey:"_uid",version:Se};a(r,n(r)),P(M(r),l=>{e.bogart(l)}),t.cid!=null&&(t.cid=[].concat(t.cid))}function X(e,o){return e+(e.indexOf("?")!==-1?"&":"?")+o}function F(e){return function(...o){e!=null&&(e(...o),e=null)}}function vt(e,o){const t=oe();let s=H("script",{src:X(e,"callback="+t)});A[t]=F(function(...n){A[t]=void 0,D(function(){$.body.removeChild(s)}),s=void 0,o(...n)}),($.head||$.body).appendChild(s)}function St(e){e.ns("jsonp"),e.expose({jsonp(o,t){return e.emit("jsonp.requested",o),vt(o,(...s)=>{e.emit("jsonp.loaded",o),t(...s)}),this}})}const Ae=[],At=A.setTimeout;function fe(e,o,...t){const s=At(function(){e(...t)},o);return Ae.push(s),s}function Tt(e,o,t){e.ns("iframeTransport"),e.defaults({iframeTransport:{timeout:30*1e3}}),e.expose({iframe(s,n){n=F(n);const a=$.head||$.body,r=Y(s.url).origin,l=Date.now(),i=F(b=>{e.emit(b),e.emit("iframeTransport.done",{...s,elapsed:Date.now()-l})}),c=fe(()=>{e.carp("Timeout! iframe transport request timed out"),a.removeChild(f),i("iframeTransport.failed"),n(null)},s.timeout||t.iframeTransport.timeout),f=H("iframe",{src:s.url,onload(){this.onload=void 0,window.addEventListener("message",{handleEvent(h){h.origin===r&&(window.removeEventListener("message",this),clearTimeout(c),a.removeChild(f),i("iframeTransport.succeeded",Date.now()-l),n(h.data))}});const b=s.data&&D(()=>JSON.stringify(s.data),h=>{e.carp(h)});f.contentWindow.postMessage({payload:b},r)}});f.style.display="none",a.appendChild(f)}})}var O=(e=>(e.SETUP_REQUESTED="lifecycle.setup.requested",e.SETUP_DONE="lifecycle.setup.done",e.TEARDOWN_REQUESTED="lifecycle.teardown.requested",e.TEARDOWN_DONE="lifecycle.teardown.done",e))(O||{});function xt(e,o){e.ns("lifecycle"),e.expose({setUp(){e.emit("lifecycle.setup.requested"),!o.consentBlocked&&e.emit("lifecycle.setup.done")},tearDown(){e.emit("lifecycle.teardown.requested"),e.emit("lifecycle.teardown.done")}})}function q(e,...o){fe(e,0,...o)}function Dt(e,o){e.ns("emitter");let t;function s(){t=[]}s(),e.hold({emit(i,...c){{const{namespace:f}=this;if(f==null||f.length===0)throw new Error("You must define an event namespace!");if(f&&!Ge(i,f))throw new Error(`Event name must match event namespace! ${i} ${f}`)}return t.length>0&&P(t,function({pattern:f,listener:b}){f.test(i)&&D(()=>{b(i,...c)},h=>{e.carp(h)})}),e}}),e.expose({on(i,c){return n(i,c)},once(i,c){const f=n(i,(b,...h)=>{f(),c(b,...h)});return f}}),o.once(O.TEARDOWN_DONE,()=>{q(s)});function n(i,c){if(typeof c!="function")throw new TypeError("listener is not a function!");return F(a(i,c))}function a(i,c){const f={topic:i,pattern:r(i),listener:c};return t.push(f),function(){t=L(t,h=>h!==f)}}function r(i){return new RegExp(`^${l(i).replace(/\\[*]/g,"(.*?)")}$`)}function l(i){return String(i).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}}function It(e,o,t){e.ns("config.moarConfig");const{moarConfig:s}=t;s!=null&&P(je(s),n=>{n.has(t)||n.copy(t,s)})}function re(e,o=decodeURIComponent){const s=new RegExp(e+"=([^;]+)").exec(o($.cookie));return s&&s[1]}function Ot(e){const o=new Date;return o.setTime(o.getTime()+1e3*e),o}function W(e,o,t=null,s=10*365*24*60*60,n=J){const a=Ot(s),r=`${e}=${n(o)}; path=/${t&&t.split(".").length>1?`; domain=${t}`:""}${a?`; expires=${a.toUTCString()}`:""}`;$.cookie=r}function pe(e,o){W(e,"",o,-1e3)}function Ct(){return re(this.config.cookie)}const Qe=(e,o=location.origin)=>o.split(":")[1].endsWith(e)?e:"";var He=(e=>(e.READ="cookies.read",e.WRITTEN="cookies.written",e.DELETED="cookies.deleted",e.CLEARED="cookies.cleared",e))(He||{});function $t(e,o,t){e.ns("cookies"),e.defaults({cookies:{domain:Y(`${location}`).hostname}}),e.expose({getCookie(s){const n=re(s);return e.emit("cookies.read",s),n},setCookie(s,n,a){const r=Qe(t.cookies.domain);r===""&&t.cookies.domain!==""&&e.carp(`domain mismatch: ${t.cookies.domain}`),W(s,n,r,a),e.emit("cookies.written",s)},deleteCookie(s){pe(s,t.cookies.domain),e.emit("cookies.deleted",s)},clearCookies(){const{cookie:s,sesname:n,cookies:{domain:a}}=t;pe(s,a),pe(n,a),e.emit("cookies.cleared")},getCookieValue(){return Ct.call(this)}})}function he(e,o){return new se(o).get(e)}class ie{constructor(o){this.data=o}getAt(o){return he(this.data,o)}toLegacyStyle(){return this.data.user}static fromPayload(o){return new ie(o.data)}static fromLegacyPayload(o){return new ie(Lt(o.data))}}function Lt(e){return{user:e}}function Ye(){return new Date().getTime()}function U(e){return e.replace(/\/$/,"")}const le=A.navigator;function Ut(){const e=le.userAgent||le.vendor||A.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.substr(0,4))}function Nt(){return D(function(){return A.self!==A.top},function(){return!0})}const me=le.userAgent;function Je(e){return e.replace(/^https?:\/\//,"")}function Xe(e,o,t){if(Ut()){e._mob="t";let r="unknown";/Android/i.test(me)?r="Android":/BlackBerry/i.test(me)?r="Blackberry":/iPhone|iPad|iPod/i.test(me)?r="IOS":/IEMobile/i.test(me)&&(r="WinMobile"),e._device=r}else e._nmob="t",e._device="desktop";e.url=Je(!("url"in e)||e.url==null?de.href:e.url),Nt()&&(e._if="t");const{byFieldKey:s}=t.config;s in e&&!e[s]&&delete e._uid;const n=t.getCookie("_ga");n!=null&&n.length>0&&(e._ga=n),s in e||o&&o.length&&(e[s]=o);const a=t.getCookie("optimizelyEndUserId");a&&(e.optimizelyid=a),"_v"in e||(e._v=Se),t&&t.changeId&&(e._uido=t.changeId)}var Z=(e=>(e.REQUESTED="entity.requested",e.LOADED="entity.loaded",e.UNLOADED="entity.unloaded",e))(Z||{});function Rt(e,o,t){e.ns("entity"),e.defaults({entity:{format:"default",endpoint:void 0,table:"user",byFieldKey:t.byFieldKey,byFieldValue:void 0,preload:!1}});let s,n=!1;e.mustConsent({loadEntity(u,E){if(arguments.length===1&&typeof u=="function"&&([E,u]=[u,E]),E!=null&&o.once("entity.loaded",(y,d)=>E(d)),n){e.carp("Entity is already in flight! Not sending another request!");return}else n=!0,e.emit("entity.requested");o.pull(y=>{o.unloadEntity(),y!=null&&(u=T({},u,y)),u=T({},u),o.getid(d=>{Xe(u,d,o);const p=g("GET",u,d);p.length<2e3?a(p,l):r(u,i,d)})})},entityReady(u){if(s==null){o.once("entity.loaded",(E,y)=>u(y));return}q(u,s)},getEntity(){return s==null&&e.carp("entity not loaded!"),s},unloadEntity(){const u=s!=null;s=void 0,u&&e.emit("entity.unloaded")}}),t.entity.preload&&o.once(O.SETUP_DONE,()=>{o.loadEntity()}),o.once(O.TEARDOWN_REQUESTED,()=>{o.unloadEntity()});function a(u,E){o.jsonp(u,E)}function r(u,E,y){o.iframe({url:g("POST",u,y),data:u},E)}function l(u){u||(u=c()),s=ie[b()?"fromLegacyPayload":"fromPayload"](u),n=!1,e.emit("entity.loaded",s)}function i(u){l(D(()=>({data:JSON.parse(u)})))}function c(){return console.warn("no entity found! Failing over using the default entity!"),{data:t.segments?{segments:t.segments.defaultSegments}:{}}}function f(u,E,y,d){const w=[];return b()?(w.push(U(u.url)),w.push("api/me"),E==="GET"||w.push("iframe"),w.push(u.cid[0]),w.push(y),w.push(d),w):(w.push(U(u.url)),w.push("api/personalize"),w.push(u.cid[0]),w.push(u.entity.table),w.push(y),w.push(d),E==="GET"||w.push("iframe"),w)}function b(){return t.entity.format==="legacy"}function h(u){const E=u.toUpperCase();if(!R(["GET","POST"],u))throw new Error(`The method ${u} is not supported!`);return E}function g(u,E,y){u=h(u);const d=t.entity.byFieldKey,w=t.entity.byFieldValue||y,p=f(t,u,d,w);let _=!1;const x=E&&D(()=>{const m=encodeURIComponent(JSON.stringify(T({[d]:w},E)));return _=!0,m});return X(t.entity.endpoint?t.entity.endpoint:U(p.join("/")),L(["segments=true",t.stream!=null&&t.stream!=="default"&&`stream=${t.stream}`,t.entity.fields!=null&&`fields=${t.entity.fields.join(",")}`,_&&"mergestate=true",_&&u==="GET"&&`state=${x}`,`ts=${Ye()}`],Boolean).join("&"))}}function ee(e,o){const t=F(o);if(e===0){const n=t;return n.times=0,n}const s=function(){++s.times===e&&t()};return s.times=0,s}function G(){}const Ft="liosetup";var Q=(e=>(e.PULL="lio.pull",e.PUSH="lio.push",e.PULLED="lio.pulled",e.PUSHED="lio.pushed",e.REGISTERED="lio.registered",e.STARTED="lio.started",e.SUCCEEDED="lio.succeeded",e.FAILED="lio.failed",e.FINISHED="lio.finished",e.FLUSH="lio.flush",e.FLUSHED="lio.flushed",e.DONE="lio.done",e))(Q||{});function jt(e,o,t){e.ns("lio"),e.defaults({lio:{global:Ft,polling:{"lio.push":t.poll,"lio.pull":{retries:0}},performPullAndSend:!0}});const s={},n={"lio.pull":[],"lio.push":[]};let a={};e.hold({integration(i,{integrationName:c=this.namespace,globalVariableName:f,success:b=G,failure:h=G,polling:g=t.lio.polling[i]}){if(!Ee(i))throw new Error(`Invalid event name ${i} (not typeof "string")`);const u={channel:i,options:{integrationName:c,globalVariableName:f,success:b,failure:h,polling:g},succeed:b,fail:h};n[i].push(u),s[c]="lio.registered",e.emit("lio.registered",u)},pullGlobalVariable(i){e.pullIntegration(T({},i,{success(c){T(c,window[i.globalVariableName])}}))},pullIntegration(i){const{success:c=G}=i;e.integration("lio.pull",T({},i,{success:r(()=>a,c)}))},pushIntegration(i){const{success:c=G}=i;e.integration("lio.push",T({},i,{success:r(()=>o.getEntity(),c)}))}}),e.expose({getIntegrationsRegistry(){return s},isIntegrationLoaded(i){return s[i]==="lio.success"},pull(i){o.once("lio.pulled",()=>i(a)),e.emit("lio.pull",a),l("lio.pull")}}),o.on(Z.LOADED,(i,c)=>{o.once("lio.pushed",()=>{e.emit("lio.done")}),e.emit("lio.push",c),l("lio.push")}),o.on(Z.UNLOADED,()=>{a={}}),t.lio.performPullAndSend&&o.on(O.SETUP_DONE,()=>{o.pull(i=>{Object.keys(i).length>0&&o.send(i)})});function r(i,c){return c.length>1?f=>c(i(),f):()=>c(i())}function l(i){e.emit("lio.flush",i);const c=n[i];c.length===0&&y();const f=ee(c.length,y);P(c,d=>{e.emit("lio.started",d),b(d,()=>{e.emit("lio.finished",d),f()})});function b(d,w){d.options.globalVariableName==null?g(d,w):h(d,w)}function h(d,w){const{globalVariableName:p}=d.options;e.poll(T({},d.options.polling,{property:p,success(){g(d,w)},failure(){e.carp(`Failed to detect \`${p}\`!`),E(d),w()}}))}function g(d,w){D(()=>{const{options:{success:p}}=d;p.length>0?p(()=>{u(d),w()}):(p(),u(d),w())},p=>{e.carp(p),E(d)})}function u(d){e.emit("lio.succeeded",d)}function E(d){d.fail(),e.emit("lio.failed",d)}function y(){e.emit("lio.flushed",i),e.emit(zt(i))}}}function zt(e){switch(e){case"lio.pull":return"lio.pulled";case"lio.push":return"lio.pushed"}throw new Error(`Invalid channel: ${e}`)}var ye,Mt=new Uint8Array(16);function Gt(){if(!ye&&(ye=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!ye))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ye(Mt)}const Bt=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Vt(e){return typeof e=="string"&&Bt.test(e)}for(var I=[],Te=0;Te<256;++Te)I.push((Te+256).toString(16).substr(1));function Kt(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(I[e[o+0]]+I[e[o+1]]+I[e[o+2]]+I[e[o+3]]+"-"+I[e[o+4]]+I[e[o+5]]+"-"+I[e[o+6]]+I[e[o+7]]+"-"+I[e[o+8]]+I[e[o+9]]+"-"+I[e[o+10]]+I[e[o+11]]+I[e[o+12]]+I[e[o+13]]+I[e[o+14]]+I[e[o+15]]).toLowerCase();if(!Vt(t))throw TypeError("Stringified UUID is invalid");return t}function qt(e,o,t){e=e||{};var s=e.random||(e.rng||Gt)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,o){t=t||0;for(var n=0;n<16;++n)o[t+n]=s[n];return o}return Kt(s)}function Ze(e,o,t="path"){return""+U(e.url)+e[t]+o}function Wt(e,o){const t=e.config,s=Ze(t,t.cid[0],"idpath")+"?assign=false";e.jsonp(s,n=>o.call(e,n))}function Qt(e,o){let t=!1,s;const n=e.once(o,(a,r)=>{t=!0,s=r});return function(){return n(),{fired:t,captured:s}}}function Ht(e,o,t){e.ns("getid"),e.defaults({getid:{uuid:qt,useSimpleUid:!1,getter:void 0}}),e.expose({getid:i});const{getid:s}=t,a=!("crypto"in window&&window.crypto!=null&&typeof window.crypto.getRandomValues=="function")||s.useSimpleUid?oe:s.uuid,r=()=>D(a,oe);let l=!1;function i(b){if(!s.getter){c(b);return}Promise.resolve(s.getter()).then(h=>{if(h)return h;throw new Error("getid getter returned no id")}).catch(h=>{throw e.carp("Getter failed! Could not get id."),h}).then(b)}function c(b){if(o.once("getid",(E,y)=>b(y)),l)return;l=!0;const h=F(E=>{l=!1,!E&&t.consent.disabled&&(E=r()),f(E),e.emit("getid",E)}),g=o.getCookieValue();if(g&&g.length){const E=Qt(o,He.CLEARED);q(()=>{if(E().fired){const y=o.getCookieValue();y?h(y):u()}else h(g)})}else t.consent.disabled||!o.consentBlocked?u():(e.carp("no id, instance blocked"),l=!1,e.emit("getid",null));function u(){t.loadid?Wt(o,h):q(()=>h(r()))}}function f(b){const h=o.getCookieValue();h&&h.length&&(o.changeId=h),o.setCookie(t.cookie,b)}}const xe=A.screen;function Yt(){const e=`${new Date}`;try{localStorage.setItem(e,e);const o=localStorage.getItem(e)===e;return localStorage.removeItem(e),o}catch{return!1}}function Jt(e,o,t){e.ns("pageAnalysis"),e.defaults({pageAnalysis:{disabled:void 0,collectQueryParams:void 0}}),e.defaults({pageAnalysis:{dataLayerPull:{disabled:!!t.pageAnalysis.disabled},performPageAnalysis:!t.pageAnalysis.disabled,collectQueryParams:!!t.pageAnalysis.collectQueryParams}}),e.mustConsent({pageAnalysis(){if(o.consentBlocked){e.carp("Instance blocked");return}const s=o.config,n=o.getCookie(s.sesname),a=o.pageData,r=Y(s.location);if(r.search.length>0){const i=ue(r.search);T(a,Pe(i,([c])=>_e(c,"utm_"))),s.qsargs&&s.qsargs.length>0&&T(a,Pe(i,([c])=>R(s.qsargs,c))),s.pageAnalysis.collectQueryParams&&T(a,i)}n||(a._sesstart="1");const l=this.referrer;if(l&&l.length>0){const i=/\/\/(.*)\//.exec(l);if(i&&!R(i[1],de.host)){const c=Je(l);a._ref=c,n||(a._sesref=c)}}o.setCookie(s.sesname,"e",s.sessecs),a._tz=parseInt(`${-new Date().getTimezoneOffset()/60}`,10),a._ul=le.language||le.userLanguage,Yt()||(a._no_storage="1"),xe&&(a._sz=xe.width+"x"+xe.height),this.pageData=a,e.emit("pageAnalysis",a)}}),t.pageAnalysis.performPageAnalysis&&(o.once(O.SETUP_REQUESTED,function(){o.pageData={},o.pageAnalysis()}),t.pageAnalysis.dataLayerPull.disabled||e.pullIntegration({success(s){T(s,o.pageData)}}))}class Xt{constructor(o){this.name="Form",this.config=o}send(o,t){const s=H("iframe",{id:oe()});s.style.display="none",$.body.appendChild(s),q(()=>{const n=s.contentWindow.document,a=H("form",{action:o,method:"post"},n),r=H("input",{value:t.dataMsg,type:"hidden",name:"_js"},n);a.appendChild(r),n.body.appendChild(a),a.submit(),fe(()=>{D(()=>{$.body.removeChild(s)}),ve(t.callback)&&t.callback()},this.config.delay)})}}class Zt{constructor(o){this.name="Gif",this.config=o}send(o,t){const s=new Image,n=F(t.callback);s.onload=n,fe(n,this.config.delay),s.src=X(o,t.dataMsg)}}function eo(e,o=!0,t=!1,s=""){return ae(e,o,t,s,!0)}const De=Object.freeze||Object,et=De({default:qe,legacy:eo});function to(e){return typeof e=="string"?et[e]:e}function oo(e,o,t){e.ns("collect"),e.defaults({collect:{plainObjectsOnly:!0,excludeTypeMeta:!0,forceFormTransport:!1}}),e.hold({getTransport:n}),e.expose({collect:s});function s(a,r,l=!1){e.emit("collect.started",a);const i=to(t.serializer);if(i==null){e.carp(`"${t.serializer}" is not a recognized serializer`),e.emit("collect.failed");return}if(a.dataMsg=i(a.data,t.collect.plainObjectsOnly,t.collect.excludeTypeMeta),a.sendurl||(a.sendurl=[]),a.sendurl.unshift(r),l){q(a.callback,a,o);return}const c=e.getTransport(a,r);a.channelName=c.name,c.send(r,T({},a,{callback:function(){ve(a.callback)&&a.callback(a,o),e.emit("collect.finished",a)}}))}function n(a,r){return t.collect.forceFormTransport||a.dataMsg.length+r.length>2e3?new Xt(t):new Zt(t)}}function so(e){console.warn("Deprecation warning: "+e)}function be(e){let o,t,s;return P(e,function(n){switch(typeof n){case"string":o=n;break;case"function":s=n;break;case"object":t=Ke(n)||ke(n)?T({},n):n;break;case"boolean":so("boolean argument is passed to send. Ignoring.");break;default:throw new TypeError("unable to process jstag.send event: unknown value type ("+typeof n+")")}}),t==null&&(t={}),{stream:o,data:t,callback:s}}function no(e,o,t){e.ns("send"),e.defaults({send:{pageViewOnFirst:!1}});let s=0;function n(a){const r=be(a);return r.data=T({_e:"pv"},o.pageData,r.data),r}e.hold({flushPayloadQueue(){const{length:a}=o.config.payloadQueue,r=ee(a,()=>{e.emit("send.unblocked",a),o.setUp()});return a===0?(r(),o):(P(o.config.payloadQueue,l=>{o.sendMessage({...l,callback(...i){l.callback!=null&&l.callback(...i),o.once("collect.finished",r)}})}),o.config.payloadQueue.length=0,o)}}),e.expose({send(...a){if(s++===0&&t.send.pageViewOnFirst){const r=n(a);o.sendMessage(r)}else o.sendMessage(be(a))},identify(...a){o.send(...a)},page(...a){const r=n(a);o.sendMessage(r)},pageView(...a){o.page(...a)},mock(...a){const r=be(a);r.data=T({_e:"mk"},o.pageData,r.data),o.sendMessage(r,!0)},unblock(a){if(a!=null&&o.once("send.unblocked",(r,l)=>a(l)),!o.blocked)return o;o.blocked=o.config.blocked=!1,e.flushPayloadQueue()},parseEvent(...a){return be(a)},sendMessage(a,r=!1){if(!t.url||!t.cid)throw new TypeError("Must have collection url and ProjectIds (cid)");if(o.blocked&&!r||o.consentBlocked){t.payloadQueue.push(a);return}if(r){if(a.callback==null)throw new TypeError("cannot call mock without a callback");const l=a.data;P(t.payloadQueue,i=>{T(l,i.data)})}a.stream||(a.stream=t.stream),P(this.config.cid,l=>{let i=Ze(t,l)+(a.stream?"/"+a.stream:"");i.indexOf("_uidn=")===-1&&t.cookie!==We&&(i=X(i,"_uidn="+t.cookie)),a.data._ts=Ye(),o.getid(c=>{Xe(a.data,c,o),o.collect(a,i,r)})})}}),e.pullIntegration({success(a){T(a,...t.payloadQueue.map(r=>r.data))}}),e.pushIntegration({success(){o.unblock()}})}function ao(...e){return j(L(e,Boolean),(o,t)=>`${o}[${t}]`,"")}function ro(e,o,t){if(e.ns("audit"),e.defaults({audit:{topic:"*",level:"silent",info:void 0}}),t.audit.info!=null&&o.on("*",t.audit.info),t.audit.level==="verbose"){const{topic:s}=t.audit;o.on(s,function(...n){const a=ao("event",s!=="*"&&s);console.log(a,...n)})}}const tt=De({croaked:!0,toString:()=>"CROAK"});function io(e,o,t){e.ns("audit.mustEnable"),e.expose({use(s){try{return Ne.call(this,s)}catch(n){if(n!==tt)throw n}return this}}),e.hold({mustEnable(){if(this.namespace==null)throw new Error("You must claim a namespace before using .mustEnable()!");const s=he(t,this.namespace.split("."));if(s==null||s.disabled)throw this.carp("Plugin disabled by configuration"),tt}})}function lo(e,o,t){e.ns("audit.carp"),e.defaults({audit:{carp:void 0}}),t.audit.carp!=null&&o.on("*.carp",t.audit.carp),e.hold({carp(s){this.emit(`${this.namespace}.carp`,s)}})}var Ie=(e=>(e.STARTED="poll.started",e.SUCCEEDED="poll.succeeded",e.FAILED="poll.failed",e.STOPPED="poll.stopped",e.RESET="poll.reset",e))(Ie||{});function co(e,o,t){e.ns("poll"),e.defaults({poll:{retries:600,interval:100}}),e.hold({poll(s){e.emit("poll.started",s);const{property:n=_(),receiver:a=A,predicate:r=Boolean,retries:l=t.poll.retries,interval:i=t.poll.interval,success:c=G,failure:f=G}=s,b=ee(l,y);let h;if(u()){E();return}h=setInterval(()=>{u()?E():b()},i);const g=F(p);return o.once(O.TEARDOWN_REQUESTED,g),g;function u(){return r(w(),n,a)}function E(){d(c,"poll.succeeded",w(),b.times)}function y(){d(f,"poll.failed",new Error(`Maximum retries exceeded for property \`${String(n)}\`: ${l}!`),b.times)}function d(x,m,v,S){p(),q(()=>{x(),e.emit(m,{tries:S,property:n,completion:v})})}function w(){return typeof n=="symbol"?a[n]:he(a,n.split("."))}function p(){clearInterval(h),e.emit("poll.stopped",s)}function _(){throw new Error("property must be defined!")}}}),e.expose({resetPolling(){e.emit("poll.reset")}})}function uo(e){e.ns("pixel"),e.hold({pixel({src:o,success:t=G,failure:s=G}){if(!o){e.carp("`src` is required for `.pixel()` requests!");return}const n=new Image;n.src=o,n.onload=a(t,"succeeded"),n.onerror=a(s,"failed");function a(r,l){return r==null?r:function(...i){r.apply(this,...i),e.emit(`pixel.${l}`,o)}}}})}function fo(e,o){e.expose({call(t,...s){o[t](...s)}})}var ot=(e=>(e.BLOCKED="consent.blocked",e.ACCEPTED="consent.accepted",e.NOT_ACCEPTED="consent.notAccepted",e.NO_CALL="consent.noCall",e))(ot||{});function po(e,o,t){e.ns("consent"),e.defaults({consent:{disabled:!0}}),e.hold({mustConsent(s){e.expose(t.consent.disabled?s:V(ne(s).map(([n,a])=>[n,(...r)=>{if(o.consentBlocked){e.emit("consent.noCall"),e.carp("Consent not enabled, cannot call method");return}return a.apply(o,r)}])))}}),e.expose({optIn(s){if(!o.consentBlocked){e.carp("Consent not enabled, instance not blocked");return}e.emit("consent.accepted"),s&&o.once(O.SETUP_DONE,()=>{o.send({consent:!0,...s})}),o.consentBlocked=!1,e.flushPayloadQueue()},optOut(){if(o.consentBlocked){e.carp("Consent not enabled, cannot block instance");return}e.emit("consent.notAccepted"),o.consentBlocked=!0,o.clearCookies(),o.tearDown()}}),o.consentBlocked=!1,e.mustEnable(),o.consentBlocked=!0,o.getid(s=>{if(s!=null){e.carp("The cookie exists already, so we infer consent was given"),o.optIn();return}o.once(O.SETUP_REQUESTED,()=>{e.emit("consent.blocked")})})}class Oe{constructor(o={}){this.plugins=[],this.config=o,this.referrer=pt(),this.blocked=this.config.blocked===!0,this.changeId=null,this.instanceId=oe(),this.use(fo),this.use(Dt),this.use(It),this.use(_t),this.use(ro),this.use(lo),this.use(io),this.use(co),this.use(xt),this.use(Ht),this.use(jt),this.use(no),this.use($t),this.use(po),this.use(Jt),this.use(oo),this.use(St),this.use(Tt),this.use(uo)}loadScript(o,t,s){return te(o,t,s),this}extend(...o){return T(...o)}parseUri(o){return Y(o)}parseQueryString(o){return ue(o)}use(o){return Ne.call(this,o)}}Oe.prototype.serializers=et;function ho(){P(Ae,clearTimeout),Ae.length=0}function mo(e){e.ns("tealium.dataLayerPull"),e.defaults({tealium:{dataLayerPull:{disabled:!0}}}),e.mustEnable(),e.pullGlobalVariable({globalVariableName:"utag_data"})}function yo(e,o,t){e.ns("cookies.dataLayerPull"),e.defaults({cookies:{dataLayerPull:{customCookieKeys:[],disabled:!1}}}),e.mustEnable(),e.pullIntegration({success(s){P(t.cookies.dataLayerPull.customCookieKeys,n=>{const a=o.getCookie(n);a!=null&&(s[n]=a)})}})}function bo(e,o,t){if(e.ns("customGlobals"),e.defaults({customGlobals:{globals:[],disabled:!0,payloadNamespace:"lyticsDataLayer"}}),e.mustEnable(),t.customGlobals.globals.length===0){e.carp("The custom globals plugin is enabled, but no globals are configured!");return}const{globals:s,payloadNamespace:n}=t.customGlobals;P(s,a=>{e.pullIntegration({globalVariableName:a,success(r){r[n]||(r[n]={}),r[n][a]=he(window,a.split("."))}})})}const go=De(["all"]);function wo(e,o,t){e.ns("segments"),e.defaults({segments:{disabled:!1,storageKey:"lytics_segments",storage:K(localStorage),defaultSegments:K(go)}}),e.mustEnable();let s;e.pushIntegration({success(n){if(s=n.getSegments(),s==null){e.carp("Entity has no segments! Falling back to the default segments!"),s=t.segments.defaultSegments;return}const a=D(()=>JSON.stringify(s));a!=null&&t.segments.storage.setItem(t.segments.storageKey,a)}}),e.expose({loadSegments(n){o.loadEntity(a=>{n(a.getSegments())})},getSegments(){return D(()=>{if(s==null){const n=t.segments.storage.getItem(t.segments.storageKey);if(n==null)throw new Error("Segments not loaded! Failing over to default segments");s=JSON.parse(n)}return s},n=>(e.carp(n),s=t.segments.defaultSegments))}}),o.once(O.TEARDOWN_REQUESTED,()=>{e.emit("segments.storageCleared"),localStorage.removeItem(t.segments.storageKey)}),ie.prototype.getSegments=function(){const{data:n}=this;return n==null||n.user==null?t.segments.defaultSegments:L(this.data.user.segments,a=>a==="not_found"?(e.carp("`not_found` segment detected and filtered!"),!1):!0)}}const Eo="__adroll";function ko(e,o,t){e.ns("adroll.audiencePush"),e.defaults({adroll:{audiencePush:{disabled:!0,global:Eo}}}),e.mustEnable();const s=t.adroll.audiencePush.global;let n;e.pushIntegration({globalVariableName:s,success(r){const l=r.getSegments();l!=null&&D(()=>{n=window[s],a(l)},i=>{e.carp(i)})}});function a(r){P(r,l=>{n.record_user({adroll_segments:`lytics_${l}`})}),e.emit("adroll.audiencePush.done")}}const Po="https://beacon.krxd.net/1x1_usermatch.gif",_o="lytics";function vo(e,o,t){e.ns("salesforce.dmp"),e.defaults({salesforce:{dmp:{disabled:!0,pixel:Po,partnerId:_o,lyticsStream:"salesforce_dmp",performConfirmationSend:!1}}}),e.mustEnable(),o.on(Q.PUSH,()=>{o.getid(s=>{e.pixel({src:X(t.salesforce.dmp.pixel,`partner=${t.salesforce.dmp.partnerId}&partner_uid=${s}`),success(){e.emit("salesforce.dmp.succeeded"),t.salesforce.dmp.performConfirmationSend&&o.send(t.salesforce.dmp.lyticsStream)},failure(){e.carp("Failed loading pixel!"),e.emit("salesforce.dmp.failed")}})})})}const So="https://sync.crwdcntrl.net/map",Ao="13197",To="LYTC";function xo(e,o,t){e.ns("lotame.dmp"),e.defaults({lotame:{dmp:{disabled:!0,baseUrl:So,clientId:Ao,clientIdSpace:To,lyticsStream:"lotame_dmp",performConfirmationSend:!1}}}),e.mustEnable(),o.on(Q.PUSH,()=>{o.getid(s=>{e.pixel({src:`${t.lotame.dmp.baseUrl}/c=${t.lotame.dmp.clientId}/tp=${t.lotame.dmp.clientIdSpace}/tpid=${s}`,success(){e.emit("lotame.dmp.succeeded"),t.lotame.dmp.performConfirmationSend&&o.send(t.lotame.dmp.lyticsStream)},failure(){e.carp("Failed loading pixel!"),e.emit("lotame.dmp.failed")}})})})}function Do(e,o){e.expose({backingInstance(){return o}})}function Io(e,o,t){e.pushIntegration({integrationName:"legacy-liosetup-callback",success(s){window.liosetup!=null&&window.liosetup.callback!=null&&P([].concat(window.liosetup.callback),n=>{n(t.entity.format==="legacy"?s.toLegacyStyle():s)})}})}function st(e,o){for(let t=0,s=e.length;t<s;t++)if(o(e[t],t,e))return t;return-1}function Oo(e,o){return e[st(e,o)]}function Ce(e,o){return st(e,o)!==-1}const nt="&uid",at="config.google.analytics.properties",Co="ga";function $o(e,o,t){e.ns("google.analytics.dimensionPush"),e.defaults({google:{analytics:{global:Co,properties:K([]),dimensionPush:{disabled:!0,eventCategory:"lytics",eventAction:"lytics_google_integration"},shouldSendUid:!0}}}),e.mustEnable();let s=!1;if(t.google.analytics.properties.length===0){e.carp("No Google Analytics properties found. Nothing to do!");return}const n=t.google.analytics.global;let a;e.pushIntegration({globalVariableName:n,success(){a=window[n],r()},failure(){E(),e.emit("google.analytics.dimensionPush.failed")}});function r(){a(()=>{const v=a.getAll();if(v.length===0){y(),m();return}const S=l(v);c(S),i(S,ee(S.length,m))});function m(){e.emit("google.analytics.dimensionPush.done")}}function l(m){const v=z(m,C=>({id:C.get("trackingId"),name:C.get("name")})),S={};return L(v,C=>{const ge=!(`${C.id}`in S);return S[C.id]=!0,ge||x(C.id,C.name),ge})}function i(m,v){P(m,S=>b(S,v))}function c(m){const v=L(t.google.analytics.properties,S=>!Ce(m,({trackingId:C})=>C===S.id));P(v,S=>{p(S.id)})}const f={user_id(m){o.getid(m)},user_field(m,v){o.entityReady(S=>v(S.getAt(m.split("."))))}};function b({name:m,id:v},S){const C=Oo(t.google.analytics.properties,ce=>ce.id===v);if(C==null){_(v),Le();return}if(C.dimensions.length===0){w(v),Le();return}const ge=ee(C.dimensions.length,Le);P(C.dimensions,([ce,ct,...Is])=>{if(ct===nt&&(s=!0),!(ce in f)){d(ce);return}f[ce](...Is,Os=>{g(m,ct,`${Os}`),ge()})});function Le(){t.google.analytics.shouldSendUid&&!s?h(m,S):(u(m),S())}}function h(m,v){o.getid(S=>{g(m,nt,S),u(m),v()})}function g(m,v,S){a(`${m}.set`,v,S),e.emit("google.analytics.dimensionPush.set.requested",{property:m,dimension:v,value:S})}function u(m){a(`${m}.send`,{hitType:"event",eventCategory:t.google.analytics.dimensionPush.eventCategory,eventAction:t.google.analytics.dimensionPush.eventAction,nonInteraction:1}),e.emit("google.analytics.dimensionPush.send.requested",{property:m})}function E(){e.carp("Google Analytics was not detected!")}function y(){e.carp("No Google Analytics properties!")}function d(m){e.carp(`Don't know how to retrieve \`${m}\`!`)}function w(m){e.carp(`No dimensions for property with ID \`${m}\`!`)}function p(m){e.carp(`Mismatch! Property in \`${at}\` for property with ID \`${m}\` not found in Google Analytics`)}function _(m){e.carp(`Mismatch! Property in Google Analytics for property with ID \`${m}\` not found in \`${at}\``)}function x(m,v){e.carp(`Not sending to Google Analytics tracker ${v} because it has a duplicate web property ${m}`)}}const Lo="googletag";function Uo(e,o,t){e.ns("google.dfp.audiencePush"),e.defaults({google:{dfp:{audiencePush:{disabled:!0,targeting:"LyticsSegments",waitForEntityToLoad:!1},global:Lo}}}),e.mustEnable();const s=t.google.dfp.global;t.google.dfp.audiencePush.waitForEntityToLoad&&e.pullIntegration({globalVariableName:s,success(){const n=window[s];n.cmd.push(()=>{n.pubads().disableInitialLoad()})}}),e.pushIntegration({globalVariableName:s,success(n){D(()=>{const a=window[s];a.cmd.push(()=>{const r=a.pubads();r.setTargeting(t.google.dfp.audiencePush.targeting,n.getSegments()),t.google.dfp.audiencePush.waitForEntityToLoad&&r.refresh()})},a=>{e.carp(a)})}})}function No(e,o,t){e.ns("google.tagManager"),e.defaults({google:{tagManager:{global:"dataLayer",segmentsKey:"lytics_segments",dataLayerPull:{disabled:!0},audiencePush:{disabled:!0}}}});const{dataLayerPull:{disabled:s},audiencePush:{disabled:n}}=t.google.tagManager;if(s&&n){e.carp("Both push and pull integrations are disabled by configuration!");return}s?e.carp("The pull integration is disabled, and the push integration enabled by configuration"):e.pullIntegration(a(l=>{P(l,i=>{r(i)&&o.sendMessage({stream:t.stream,data:i})}),e.emit("google.tagManager.dataLayerPulled")})),n?e.carp("The push integration is disabled, and the pull integration enabled by configuration"):e.pushIntegration(a((l,i)=>{l.push({[t.google.tagManager.segmentsKey]:V(z(i.getSegments(),c=>[c,c]))}),e.emit("google.tagManager.audiencePushed")}));function a(l){const i=t.google.tagManager.global;return{globalVariableName:i,success(c){l(window[i],c)}}}function r(l){return M(l).length>2||!("event"in l)}}const Ro="gtag";function Fo(e,o,t){e.ns("google.ga4"),e.defaults({google:{ga4:{disabled:!0,global:Ro,shouldSendUid:!0,eventName:"lytics",eventCategory:"lytics_user_properties"}}}),e.mustEnable();let s;e.pushIntegration({globalVariableName:t.google.ga4.global,success(){s=window[t.google.ga4.global],n()},failure(){a()}});function n(){e.emit("google.ga4.sending"),o.getid(r=>{s("set","user_properties",{ly_segments_dim:o.getSegments().filter(l=>!l.startsWith("orc_experience_")).join(","),...t.google.ga4.shouldSendUid?{ly_user_id_dim:r}:{}}),s("event",t.google.ga4.eventName,{event_category:t.google.ga4.eventCategory,non_interaction:!0}),e.emit("google.ga4.success")})}function a(){e.carp("gtag not detected"),e.emit("google.ga4.failed")}}const jo="__attag",zo="addthis";function Mo(e,o,t){e.ns("addThis.audiencePush"),e.defaults({addThis:{audiencePush:{disabled:!0,cookie:jo,global:zo}}}),e.mustEnable();const s=t.addThis.audiencePush.global;let n;e.pushIntegration({globalVariableName:s,success(f){n=window[s],a(f)}});function a(f){e.emit("addThis.audiencePush.detected");const b=t.addThis.audiencePush.cookie,h=o.getCookie(b);if(h!=null){e.emit("addThis.audiencePush.cookieDetected",b),r(h,f);return}e.emit("addThis.audiencePush.cookieNotDetected",b),i()}function r(f,b){const h=L(f.split(","),g=>!_e(g,"lio:"));h.push(...z(b.getSegments(),c)),l(h.join(","))}function l(f){o.setCookie(t.addThis.audiencePush.cookie,f,3600*24*30),e.emit("addThis.audiencePush.cookieUpdated"),i()}function i(){if(!(n.user&&n.user.tag)){e.carp("The AddThis SDK must provide a `user.tag` method!");return}D(()=>{P(o.getSegments(),f=>{n.user.tag(c(f))})},f=>{e.carp(f)}),e.emit("addThis.audiencePush.pushed")}function c(f){return`lio:${f}`}}function Go(e,o=500){const t=M(e),s=[],n=3+2*t.length;let a=0,r={};return P(t,(l,i)=>{const c=D(()=>JSON.stringify(e[l]));if(c==null)return s.push(e),!0;(a+=n+l.length+c.length)>o&&(s.push(r),r={}),r[l]=e[l],i===t.length-1&&s.push(r)}),s}const Bo="_fbq",Vo="fbq",Ko="Lytics Audiences";function qo(e,o,t){e.ns("facebook.ads.audiencePush"),e.defaults({facebook:{ads:{audiencePush:{global:Bo,globalFn:Vo,disabled:!0,eventName:Ko,maxMessageLength:1/0,sendSequentially:!1,sendExternalId:!0}}}}),e.mustEnable();let s=!1,n,a;const r=ee(2,()=>{e.carp("Facebook Ads Audience Push: failed to find target after 2 attempts"),e.emit("facebook.ads.audiencePush.pollFailed")});e.poll({property:t.facebook.ads.audiencePush.global,success:l(()=>A[t.facebook.ads.audiencePush.global]),failure:r}),e.poll({property:t.facebook.ads.audiencePush.globalFn,success:l(()=>A[t.facebook.ads.audiencePush.globalFn]),failure:r}),o.on(Z.LOADED,(h,g)=>{if(a=g,n==null){o.once("facebook.ads.audiencePush.globalReady",u=>{i(g,u)});return}i(g,n)});function l(h){return()=>{n||(n=h(),e.emit("facebook.ads.audiencePush.globalReady",n),a&&i(a,n))}}function i(h,g){if(console.log("Facebook Ads Audience Push: pushing audience for entity",h,g),typeof g=="function")c(h,g);else if(g&&typeof g.push=="function")f(h,g);else{e.carp("Facebook Ads Audience Push: target is not a function or array");return}}function c(h,g){b(h,u=>{g("trackCustom",t.facebook.ads.audiencePush.eventName,u),s=!0})}function f(h,g){b(h,u=>{g.push(["track",t.facebook.ads.audiencePush.eventName,u]),s=!0})}function b(h,g){o.getid(u=>{const E=h.getSegments();if(!s&&t.facebook.ads.audiencePush.sendExternalId&&g({external_id:u}),E.length===0){e.carp("No segments to send!");return}const y=V(z(E,d=>[d,"true"]));t.facebook.ads.audiencePush.sendSequentially?P(E,d=>{g({[d]:"true"})}):P(Go(y,t.facebook.ads.audiencePush.maxMessageLength),d=>{g(d)}),e.emit("facebook.ads.audiencePush.done",y)})}}function Wo(e,o,t){const s=document.createElement("link");s.rel="stylesheet",s.type="text/css",s.href=e,s.onload=o,s.onerror=t;const n=document.getElementsByTagName("link")[0],a=n&&n.parentNode||document.head||document.body,r=n||a.lastChild;return r!=null?a.insertBefore(s,r):a.appendChild(s),this}function Qo(e,o,t){e.ns("pathfora.install");const s=U(t.url);e.defaults({pathfora:{install:{global:"pathfora",disabled:!0,sdk:{disabled:!0,loaded:!1,lazy:!0,src:`${s}/static/pathfora.min.js`},css:{disabled:!0,loaded:!1,src:void 0}}}}),e.mustEnable(),o.once("pathfora.*.sdkNotDetected",n),t.pathfora.install.sdk.lazy===!1&&e.poll({property:t.pathfora.install.global,retries:0,failure(){e.emit("pathfora.install.sdkNotDetected")}});function n(){if(t.pathfora.install.sdk.disabled){e.carp("sdk installation disabled"),f();return}if(r()){e.carp("already installed"),l();return}if(t.pathfora.install.sdk.src==null){e.carp("sdk installation has invalid src"),f();return}s!=="https://c.lytics.io"&&(window.PathforaCSS=`${s}/static/pathfora.min.css`),te(t.pathfora.install.sdk.src,()=>{l()},()=>{e.carp("sdk installation failed"),f()})}function a(){if(t.pathfora.install.css.disabled){e.carp("custom css installation disabled"),c();return}if(t.pathfora.install.css.src==null){e.carp("custom css installation has invalid src"),c();return}Wo(t.pathfora.install.css.src,()=>{t.pathfora.install.css.loaded=!0,i()},()=>{e.carp("custom css installation failed"),c()})}function r(){return window.pathfora!=null}function l(){t.pathfora.install.sdk.loaded=!0,e.emit("pathfora.install.sdk.succeeded"),a()}function i(){e.emit("pathfora.install.css.succeeded"),c()}function c(){e.emit("pathfora.install.succeeded"),e.emit("pathfora.install.done")}function f(){e.emit("pathfora.install.done")}}const Ho="lytics_variation_preview_id",Yo="lytics_preview_id",Jo="variation",Xo="experience";function Zo(e,o,t){e.ns("pathfora.preview"),e.defaults({pathfora:{preview:{disabled:!0,format:void 0,global:"pathfora",polling:{retries:5},variation:{previewKey:Ho,id:void 0,src:`${U(t.url)}/api/program/campaign/variation/preview/${t.cid[0]}/{id}/config.js`},experience:{previewKey:Yo,id:void 0,src:`${U(t.url)}/api/experience/preview/${t.cid[0]}/{id}/config.js`}}}}),e.hold({isPathforaPreview:s}),e.mustEnable(),e.pushIntegration({globalVariableName:t.pathfora.preview.global,polling:{property:t.pathfora.preview.global,retries:t.pathfora.preview.polling.retries},success(){n()},failure(){if(o.config.pathfora.install.disabled||o.config.pathfora.install.sdk.disabled){e.carp("unable to install sdk as pathfora.install or pathfora.install.sdk is disabled"),l();return}e.emit("pathfora.preview.sdkNotDetected")}}),o.once("pathfora.install.done",function(){if(window[t.pathfora.preview.global]==null){e.carp("cannot preview when pathfora is not installed"),l();return}n()});function s(){const i=Y(t.location);let c={};return i.search.length>0&&(c=ue(i.search)),c[t.pathfora.preview.variation.previewKey]!=null?(t.pathfora.preview.variation.id=c[t.pathfora.preview.variation.previewKey],t.pathfora.preview.format=Jo,!0):c[t.pathfora.preview.experience.previewKey]!=null?(t.pathfora.preview.experience.id=c[t.pathfora.preview.experience.previewKey],t.pathfora.preview.format=Xo,!0):(e.carp("missing query params"),!1)}function n(){if(!s()){l();return}if(e.emit(`pathfora.preview.${t.pathfora.preview.format}.requested`),t.pathfora.preview[t.pathfora.preview.format].id==null||t.pathfora.preview[t.pathfora.preview.format].id===""){e.carp(`${t.pathfora.preview.format} id missing`),l();return}const{src:i,id:c}=t.pathfora.preview[t.pathfora.preview.format];if(/\W/.test(c)){e.carp("id must be alphanumeric"),l();return}const f=a(i,c);te(f,()=>{r()},()=>{e.carp(`failed to load ${t.pathfora.preview.format} config`),l()})}function a(i,c){return i.replace("{id}",c)}function r(){e.emit(`pathfora.preview.${t.pathfora.preview.format}.succeeded`),e.emit("pathfora.preview.done")}function l(){e.emit("pathfora.preview.done")}}function es(e,o,t){e.ns("pathfora.publish"),e.defaults({pathfora:{publish:{disabled:!0,global:"pathfora",src:`${U(t.url)}/api/experience/candidate/${t.cid[0]}/config.js`,loaded:!1,listenForProfileChange:!1,priority:"ordered",urlFragmentWhitelist:[],polling:{retries:5},recommendations:{experience:[]},candidates:{experiences:[],variations:[],legacyABTests:[]},legacy:{disabled:!0,src:`${U(t.url)}/api/program/campaign/config/${t.cid[0]}/config.js`,loaded:!1}}}}),e.mustEnable(),t.pathfora.publish.useLegacy=r(),o.once(O.TEARDOWN_REQUESTED,()=>{const{candidates:p}=t.pathfora.publish;p.experiences.length=0,p.variations.length=0,p.legacyABTests.length=0}),e.pushIntegration({globalVariableName:t.pathfora.publish.global,polling:{property:t.pathfora.publish.global,retries:t.pathfora.publish.polling.retries},success(p){a(p)},failure(){t.pathfora.install.disabled?(e.carp("unable to request pathfora install since pathfora.install is disabled"),y()):s()}});function s(){o.once("pathfora.install.done",()=>{o.entityReady(a)}),e.emit("pathfora.publish.sdkNotDetected")}function n(){if(window[t.pathfora.publish.global].clearById!=null&&t.pathfora.publish.candidates){const _=[...t.pathfora.publish.candidates.experiences,...t.pathfora.publish.candidates.variations,...t.pathfora.publish.candidates.legacyABTests].map(x=>x.id);if(t.pathfora.publish.listenForProfileChange){const x=window[t.pathfora.publish.global].getDependentWidgets(),m=Object.keys(x),v=_.filter(S=>R(m,S));m.length>0&&window[t.pathfora.publish.global].clearById(v)}else _.length>0&&window[t.pathfora.publish.global].clearById(_)}}function a(p){if(window[t.pathfora.publish.global]==null){e.carp("cannot publish when pathfora is not installed"),y();return}if(e.isPathforaPreview()){e.carp("unable to publish since request is for preview"),y();return}if(n(),t.pathfora.publish.useLegacy){if(t.pathfora.publish.legacy.disabled){e.carp("unable to publish since required method(legacy) is disabled"),y();return}l(p)}else c(p)}function r(){return t.pathfora.publish.urlFragmentWhitelist.length?!Ce(ne(t.pathfora.publish.urlFragmentWhitelist),([,p])=>t.location.indexOf(p)!==-1):!0}function l(p){te(w(t.pathfora.publish.legacy.src,t.url),()=>{t.pathfora.publish.legacy.loaded=!0,i(p)?e.emit("pathfora.publish.legacy.pathforaCallbackFlushed"):e.carp("failed to flush pathfora callbacks no variations executed"),E()},()=>{e.carp("failed to load legacy personalization config"),y()})}function i(p){const _=window[t.pathfora.publish.global].callbacks||[];return _.length?(P(_,function(x){x(p.data&&p.data.user)}),!0):!1}function c(p){te(t.pathfora.publish.src,()=>{t.pathfora.publish.loaded=!0,f(p)},()=>{e.carp("failed to load personalization config"),y()})}function f(p){let _=[];if(!u()){e.carp("unable to configure experiences when no _pfacfg present"),y();return}const x=b(p),m=g(p);if(!x&&!m){y();return}_=[..._,...t.pathfora.publish.candidates.experiences,...t.pathfora.publish.candidates.variations],t.pathfora.publish.candidates.legacyABTests.length&&(window[t.pathfora.publish.global].initializeABTesting(t.pathfora.publish.candidates.legacyABTests),e.emit("pathfora.publish.current.abtestsInitialized")),_.length&&(window[t.pathfora.publish.global].initializeWidgets(_,window._pfacfg.acctcfg,{priority:t.pathfora.publish.priority}),e.emit("pathfora.publish.current.widgetsInitialized")),E()}function b(p){if(!d(p))return!1;const _=p.data.experiences||[];if(!_.length){e.carp("unable to select experience candidates when no recommendations have been made");return}return P(_,function(x){const m=window._pfacfg.candidates[x.experience_id],v=h(p);m?(m.segment&&R(p.data.user.segments,m.segment)||m.personalization_key&&R(v,m.personalization_key))&&(Ce(t.pathfora.publish.candidates.experiences,S=>S.id===m.widget.id)?e.carp(`experience(${m.widget.id}) already exists in candidates list`):t.pathfora.publish.candidates.experiences.push(m.widget)):e.carp(`recommended experience(${x.experience_id}) was not found in _pfacfg`)}),!0}function h(p){const _=p.data.user.flows_step_slugs||{},x=Object.values(_),m=[];for(const v of x)Array.isArray(v)?m.push(...v):m.push(v);return m}function g(p){return d(p)?(P(we(window._pfacfg.variations),function(_){R(p.data.user.segments,window._pfacfg.variations[_].segment)&&t.pathfora.publish.candidates.variations.push(window._pfacfg.variations[_].widget)}),window._pfacfg.abTestConfigs.length&&(t.pathfora.publish.candidates.legacyABTests=window._pfacfg.abTestConfigs),!0):!1}function u(){return window._pfacfg!=null}function E(){e.emit("pathfora.publish.succeeded"),e.emit("pathfora.publish.done")}function y(){e.emit("pathfora.publish.done")}function d(p){return p==null||p.data==null||p.data.user==null?(e.carp("entity must contain user attribute!"),!1):!0}function w(p,_){const x="https://c.lytics.io";return U(_)===x?p:p.replace(x,_)}}function ts(e){return e.substr(e.lastIndexOf("-")+1).toUpperCase()}function os(e,o,t){e.ns("amazon.dsp"),e.defaults({amazon:{dsp:{disabled:!0,euWhitelist:["UK","DE","FR","IT","ES","IN","AE"],pixelEu:"https://aax-eu.amazon-adsystem.com/s/dcm?pid=0fd612d9-169e-4abc-9509-01b23357b7a4",pixelRest:"https://s.amazon-adsystem.com/dcm?pid=8f9b0615-e931-45a3-99e7-549741c1960e",alpha2:void 0,language:navigator.language,lyticsStream:"amazon_dsp",performConfirmationSend:!1}}}),e.mustEnable(),o.on(Q.PUSH,()=>{o.getid(n=>{const{pixelEu:a,pixelRest:r}=t.amazon.dsp,l=X(s()?a:r,`id=${n}`);e.pixel({src:l,success(){e.emit("amazon.dsp.succeeded",l),t.amazon.dsp.performConfirmationSend&&o.send(t.amazon.dsp.lyticsStream)},failure(){e.carp("Failed loading pixel!"),e.emit("amazon.dsp.failed",l)}})})});function s(){const{euWhitelist:n,alpha2:a,language:r}=t.amazon.dsp;return R(n,a||ts(r))}}const ss="https://trc.taboola.com/sg",ns="lytics";function as(e,o,t){e.ns("taboola.dmp"),e.defaults({taboola:{dmp:{disabled:!0,baseUrl:ss,partnerId:ns,redirectUrl:`${U(t.url)}/c/provider/taboola?taboola_id=<TUID>`}}}),e.mustEnable(),o.on(Q.PUSH,()=>{o.getid(s=>{const n=J(`${t.taboola.dmp.redirectUrl}&_uid=${s}&account_id=${t.cid[0]}`);e.pixel({src:`${t.taboola.dmp.baseUrl}/${t.taboola.dmp.partnerId}/1/cm?redirect=${n}`,success(){e.emit("taboola.dmp.succeeded")},failure(){e.carp("Failed loading pixel!"),e.emit("taboola.dmp.failed")}})})})}const rs="https://match.adsrvr.org/track/cmf/generic";function is(e,o,t){if(e.ns("thetradedesk.dsp"),e.defaults({thetradedesk:{dsp:{disabled:!0,baseUrl:rs,partnerId:void 0}}}),e.mustEnable(),t.thetradedesk.dsp.partnerId==null){e.carp('"partnerId" needs to be passed into config!'),e.emit("thetradedesk.dsp.failed");return}o.on(Q.PUSH,()=>{o.getid(s=>{e.pixel({src:`${t.thetradedesk.dsp.baseUrl}/?ttd_pid=${t.thetradedesk.dsp.partnerId}&ttd_puid=${s}&ttd_puid=${t.cid[0]}&ttd_tpi=1&gpdr=0&domain=${location.hostname.replace(/^www\./,"")}`,success(){e.emit("thetradedesk.dsp.succeeded")},failure(){e.carp("Failed loading pixel!"),e.emit("thetradedesk.dsp.failed")}})})})}function rt(e){return Number.isNaN(+e)?new Date(e):new Date(+e)}const ls="https://cm.g.doubleclick.net/pixel",cs=10080*60*1e3,ds="lytics",us="user.dv360_id_ts",fs="google_dv360";function ps(e,o,t){if(e.ns("google.dv360"),e.defaults({google:{dv360:{disabled:!0,baseUrl:ls,bidderAccountNid:ds,entityIdModifiedAtField:us,cookieTTL:cs,lyticsStream:fs}}}),e.mustEnable(),t.google.dv360.bidderAccountNid==null){e.carp("Missing required config option: google.dv360.bidderAccountNid!");return}o.getid(s=>{o.entityReady(n=>{const a=n.getAt(t.google.dv360.entityIdModifiedAtField.split("."));if(+rt(a)>Date.now()-t.google.dv360.cookieTTL){e.emit("google.dv360.skipped");return}e.pixel({src:`${t.google.dv360.baseUrl}?google_cm&google_nid=${t.google.dv360.bidderAccountNid}&google_hm=${btoa(s)}`,success(){o.send(t.google.dv360.lyticsStream),e.emit("google.dv360.succeeded")},failure(){e.carp("Failed loading pixel!"),e.emit("google.dv360.failed")}})})})}const hs="https://ups.analytics.yahoo.com/ups/58702/cms",ms=336*60*60*1e3,ys="LYTICS",bs="user.yahoo_id_ts",gs="yahoo";function ws(e,o,t){if(e.ns("yahoo.datax"),e.defaults({yahoo:{datax:{disabled:!0,baseUrl:hs,partnerId:ys,lyticsStream:gs,entityIdModifiedAtField:bs,cookieTTL:ms,gdpr:!1,gdprConsent:void 0}}}),e.mustEnable(),t.yahoo.datax.partnerId==null){e.carp("Missing required config option: yahoo.datax.partnerId!");return}o.getid(s=>{o.entityReady(n=>{const a=n.getAt(t.yahoo.datax.entityIdModifiedAtField.split("."));if(+rt(a)>Date.now()-t.yahoo.datax.cookieTTL){e.emit("yahoo.datax.skipped");return}e.pixel({src:`${t.yahoo.datax.baseUrl}?partner_id=${t.yahoo.datax.partnerId}&account_id=${t.cid[0]}&_uid=${s}${t.yahoo.datax.gdpr?`gdpr=1&gdpr_consent=${t.yahoo.datax.gdprConsent}`:""}`,success(){e.emit("yahoo.datax.succeeded")},failure(){e.carp("Failed loading pixel!"),e.emit("yahoo.datax.failed")}})})})}const Es="https://gum.criteo.com/sync";function ks(e,o,t){e.ns("criteo.ads"),e.defaults({criteo:{ads:{disabled:!0,baseUrl:Es,partnerId:"595",redirectUrl:`${U(t.url)}/c/provider/criteo?criteo_id=@USERID@`}}}),e.mustEnable(),o.on(Q.PUSH,()=>{o.getid(s=>{const n=J(`${t.criteo.ads.redirectUrl}&_uid=${s}&account_id=${t.cid[0]}`);e.pixel({src:`${t.criteo.ads.baseUrl}?c=${t.criteo.ads.partnerId}&r=1&u=${n}`,success(){e.emit("criteo.ads.succeeded")},failure(){e.carp("Failed loading pixel!"),e.emit("criteo.ads.failed")}})})})}function Ps(e,o,t){e.ns("onetrust.consent"),e.defaults({onetrust:{consent:{disabled:!0,accept:[],global:"OneTrust"}}}),e.mustEnable(),t.consent.disabled&&(t.consent.disabled=!1),o.on(ot.BLOCKED,()=>{e.emit("onetrust.consent.blocked")});const s=window[t.onetrust.consent.global];if(s===void 0){e.carp("OneTrust not found, instance blocked");return}const n=[].concat(t.onetrust.consent.accept);s.OnConsentChanged(a=>{const r=a.detail;if(!Array.isArray(r)||r.length===0||n.length===0||!n.every(l=>r.includes(l))){e.carp("OneTrust consent not accepted"),e.emit("onetrust.consent.notAccepted",r),o.optOut();return}e.emit("onetrust.consent.accepted",r),o.optIn()})}const _s=["click","dblclick","change","input","focusin","focusout","keydown","keypress","mousedown","mouseout","mouseover","mouseup","touchstart","touchend","touchcancel"];function vs(e,o,t){e.ns("lx"),e.defaults({lx:{disabled:!0,prefix:"lx",target:K(document.body),stream:"default",triggers:_s}}),e.mustEnable();const{prefix:s}=t.lx,n=`${s}-trigger`,a=`data-${n}`,r=`${s}-send-`,l=`data-${r}`,i=`${s}-stream`,c=`data-${i}`,f={};b(),o.once(O.TEARDOWN_REQUESTED,()=>{h()});function b(){for(const y of t.lx.triggers){const d=w=>{const p=w.target;g(y,p)&&o.send(u(p),E(p))};t.lx.target.addEventListener(y,d),f[y]=d}}function h(){for(const y of t.lx.triggers){const d=f[y];d&&t.lx.target.removeEventListener(y,d)}}function g(y,d){return d.getAttribute(n)===y||d.getAttribute(a)===y}function u(y){return y.getAttribute(i)||y.getAttribute(c)||t.lx.stream}function E(y){const d={};for(const w of y.attributes){const p=w.name.startsWith(r);if(!p&&!w.name.startsWith(l))continue;const _=w.name.slice(p?r.length:l.length);d[_.replace(/-/g,".")]=w.value}return d}}class it{constructor(o,t,s,n){this.onTick=o,this.onStop=t,this.initialDelay=s,this.maxAttempts=n,this.prevFactor=1,this.currentFactor=1,this.attempts=0,this.timer=null}start(){this.attempts=0,this.prevFactor=1,this.currentFactor=1,this.delay=this.initialDelay,this.poll()}stop(){this.onStop(),this.timer&&(clearTimeout(this.timer),this.timer=null)}reset(){this.stop(),this.start()}incFactorFib(){const o=this.prevFactor+this.currentFactor;this.prevFactor=this.currentFactor,this.currentFactor=o}poll(){if(this.attempts>=this.maxAttempts){this.stop();return}this.onTick(),setTimeout(()=>{this.attempts++,this.delay*=this.currentFactor,this.incFactorFib(),this.poll()},this.delay)}}function Ss(e,o,t){e.ns("contentstack.entityPush"),e.defaults({contentstack:{entityPush:{disabled:!0,baseUrl:"https://personalize-edge.contentstack.com",personalizeProjectId:void 0,audienceAttribute:"lytics_audiences",flowAttribute:"lytics_flows",cookie:"cs-personalize-user-uid",cookieDomain:null,poll:{disabled:!0,initialDelay:4e3,maxAttempts:5},cache:{disabled:!1,storage:K(sessionStorage),key:"contentstack_personalize"}}}}),e.mustEnable(),t.contentstack.entityPush.poll.disabled||o.once(O.SETUP_DONE,()=>{r()}),o.on(Z.LOADED,(l,i)=>{const c=i.data.user._id;if(!c){e.carp("Lytics ID not found in entity data."),e.emit("contentstack.entityPush.failure"),e.emit("contentstack.entityPush.done");return}re(t.contentstack.entityPush.cookie)==null&&W(t.contentstack.entityPush.cookie,c,t.contentstack.entityPush.cookieDomain,void 0,String),e.emit("contentstack.entityPush.requested",i);const b=[].concat(t.contentstack.entityPush.personalizeProjectId),h=JSON.stringify(n(i));if(a(h)){e.carp("No changes detected, skipping entity push."),e.emit("contentstack.entityPush.done");return}P(b,g=>{fetch(`${t.contentstack.entityPush.baseUrl}/user-attributes`,{method:"PATCH",body:h,headers:{"x-cs-personalize-user-uid":c,...g?{"x-project-uid":g}:{}}}).then(u=>{if(u.ok){e.emit("contentstack.entityPush.success",u);return}e.emit("contentstack.entityPush.failure")}).catch(u=>{e.carp(u),e.emit("contentstack.entityPush.failure")}).finally(()=>{e.emit("contentstack.entityPush.done")})})});function s(l=[]){return`|${[...new Set(l)].sort((f,b)=>f.localeCompare(b)).join("|")}|`}function n({data:l}){const{segments:i,flows_step_slugs:c}=l.user;return{[t.contentstack.entityPush.audienceAttribute]:i.length?s(i):void 0,[t.contentstack.entityPush.flowAttribute]:c?s(Object.values(c)):void 0}}function a(l){const{disabled:i,storage:c,key:f}=t.contentstack.entityPush.cache;if(i)return!1;const b=c.getItem(f);return b==null||b!==l?(c.setItem(f,l),!1):!0}function r(){const{initialDelay:l,maxAttempts:i}=t.contentstack.entityPush.poll,c=new it(()=>{o.loadEntity()},()=>{e.carp("Polling stopped."),e.emit("contentstack.entityPush.pollStopped")},Math.max(l,1e3),Math.min(i,10));c.start(),e.emit("contentstack.entityPush.pollStarted"),o.on(O.TEARDOWN_REQUESTED,()=>{c.stop()}),o.on(Ie.RESET,()=>{c.reset()})}}function As(e,o,t){e.ns("contentstack.entitySync"),e.defaults({contentstack:{entitySync:{disabled:!0,cookie:"cs-personalize-user-uid",segmentsCookie:"cs-lytics-audiences",flowsCookie:"cs-lytics-flows",stateCookiesMaxAge:3600*24*7,cookieDomain:null,poll:{disabled:!0,initialDelay:4e3,maxAttempts:5}}}}),e.mustEnable(),t.contentstack.entitySync.poll.disabled||o.once(O.SETUP_DONE,()=>{n()}),o.on(Z.LOADED,(a,r)=>{const l=r.data.user._id;if(!l){e.carp("Lytics ID not found in entity data."),e.emit("contentstack.entitySync.failure"),e.emit("contentstack.entitySync.done");return}re(t.contentstack.entitySync.cookie)==null&&W(t.contentstack.entitySync.cookie,l,t.contentstack.entitySync.cookieDomain,void 0,String),W(t.contentstack.entitySync.segmentsCookie,s(r.data.user.segments),t.contentstack.entitySync.cookieDomain,t.contentstack.entitySync.stateCookiesMaxAge,String),W(t.contentstack.entitySync.flowsCookie,s(Object.values(r.data.user.flows_step_slugs||{})),t.contentstack.entitySync.cookieDomain,t.contentstack.entitySync.stateCookiesMaxAge,String)});function s(a=[]){return`|${[...new Set(a)].sort((i,c)=>i.localeCompare(c)).join("|")}|`}function n(){const{initialDelay:a,maxAttempts:r}=t.contentstack.entitySync.poll,l=new it(()=>{o.loadEntity()},()=>{e.carp("Polling stopped."),e.emit("contentstack.entitySync.pollStopped")},Math.max(a,1e3),Math.min(r,10));l.start(),e.emit("contentstack.entitySync.pollStarted"),o.on(O.TEARDOWN_REQUESTED,()=>{l.stop()}),o.on(Ie.RESET,()=>{l.reset()})}}const Ts="rec_";function lt(e){return`?${ae(e)}`}function xs(e,o,t){e.ns("recommend"),e.defaults({recommend:{prefix:Ts,storage:K(sessionStorage)}}),e.expose({recommend(n,a){e.emit("recommend.requested",n),o.getid(r=>{s(T({},n,{uid:r,cid:t.cid||t.cid[0]}),F(a))})}});function s(n,a){const{cid:r,uid:l,visited:i,shuffle:c,ql:f,display:b,...h}=n,g=t.recommend.prefix+l+":"+lt(n),u=t.recommend.storage.getItem(g);if(typeof u=="string"&&i!==!1)try{const d=JSON.parse(u);if(d&&d.data&&(c===!0&&d.data.shift(),d.data.length>0)){t.recommend.storage.setItem(g,JSON.stringify(d)),a(d.data),e.emit("recommend.success",d.data);return}}catch(d){e.carp(`Could not parse json stored response: ${d}`),a([]),e.emit("recommend.failure",d);return}const y=`${`${t.url}/api/content/recommend/${r}/user/${t.byFieldKey}/${l}`}${lt({...h,display:b,ql:f,visited:i,shuffle:c})}`;fetch(y).then(d=>d.json().catch(w=>(e.carp(`Could not parse json response: ${w}`),{data:[]}))).then(d=>{if(d.data&&d.data.length>0){for(const w of d.data)w.url&&w.url.split("/")[0].split(".").length>1&&(w.url=`https://${w.url}`);return t.recommend.storage.setItem(g,JSON.stringify(d)),d.data}return[]}).catch(d=>(e.carp(`Error fetching recommendations: ${d}`),e.emit("recommend.failure",d),[])).then(d=>{a(d),e.emit("recommend.success",d)})}}let k;A[B]||(A[B]=A[Ue]||{});function $e(e){A[B][e]=function(...o){if(k==null)throw new Error("You must first call .init()");return k[e](...o)}}function N(e,o){A[B][e]=o}N("JSTag",Oe),N("init",(function(){$e("loadScript"),$e("use"),N("extend",T),N("ckieGet",re),N("ckieSet",W),N("ckieDel",pe),N("isLoaded",!1),N("util",{forEach:P,reduce:j,map:z,filter:L,contains:R,pairs:ne,object:V,filterObject:Pe,trim:Fe,extend:T,once:F,parseUri:Y,parseQueryString:ue,method:$e,shallow:K,matchingDomainFor:Qe});function o(){k&&k.tearDown(),ho()}return function(s){const n=A[B].config;return o(),n&&n.moarConfig&&!s.moarConfig&&(s.moarConfig=n.moarConfig),k=new Oe(s||n),k.use(Ps),k.use(Rt),k.use(mo),k.use(yo),k.use(bo),k.use(Ss),k.use(As),k.use(wo),k.use(ko),k.use(Io),k.use(Mo),k.use(qo),k.use(Uo),k.use(No),k.use($o),k.use(Fo),k.use(ps),k.use(ws),k.use(Qo),k.use(Zo),k.use(es),k.use(vo),k.use(xo),k.use(os),k.use(as),k.use(is),k.use(ks),k.use(Do),k.use(vs),k.use(xs),N("isLoaded",!0),N("config",k.config),N("serializers",k.serializers),N("version",Se),k.setUp(),o}})()),A[Ue]=A[B];const Ds=A[B]})();
 window.jstag.config.moarConfig = {"cid":["0f002fd9978bd006e6b8d3077ebaf065"],"addThis":{"audiencePush":{"disabled":false}},"adroll":{"audiencePush":{"disabled":false}},"amazon":{"dsp":{"disabled":true,"performConfirmationSend":false}},"audit":{},"contentstack":{},"cookies":{"dataLayerPull":{}},"criteo":{"ads":{"disabled":true}},"entity":{"preload":true,"fields":["icn_access_level_last","icn_account_number","icn_account_status","icn_added_date","icn_channel_code_last","icn_city","icn_country","icn_last_transaction_date","icn_list_source_last","icn_state","icn_zip"]},"facebook":{"ads":{"audiencePush":{"disabled":false}}},"customGlobals":{"globals":["_EW.dataLayer.evars.evar55","_EW.dataLayer.evars.evar56","_EW.dataLayer.evars.evar57","_EW.dataLayer.evars.evar34","EWDataLayer"],"disabled":false},"google":{"analytics":{"properties":[{"id":"UA-2247245-3","dimensions":[["user_id","dimension1"],["user_field","dimension2","user.segments"]]},{"id":"UA-4758180-1","dimensions":[["user_id","dimension5"],["user_field","dimension6","user.segments"]]}],"dimensionPush":{"disabled":false}},"ga4":{"disabled":true},"dfp":{"audiencePush":{"disabled":false}},"tagManager":{"dataLayerPull":{"disabled":true},"audiencePush":{"disabled":true}},"dv360":{"disabled":false}},"iframeTransport":{},"lio":{"polling":{"lio.push":{},"lio.pull":{}}},"lotame":{"dmp":{"disabled":true}},"pageAnalysis":{},"pathfora":{"install":{"disabled":false,"sdk":{"disabled":false},"css":{"disabled":false,"src":"https://d2r8ootic371nc.cloudfront.net/lytics-epe/epe-overrides.css"}},"preview":{"disabled":false,"polling":{},"variation":{"src":"https://api.lytics.io/api/program/campaign/variation/preview/0f002fd9978bd006e6b8d3077ebaf065/{id}/config.js"},"experience":{"src":"https://api.lytics.io/api/experience/preview/0f002fd9978bd006e6b8d3077ebaf065/{id}/config.js"}},"publish":{"disabled":false,"legacy":{"disabled":false,"src":"https://c.lytics.io/api/program/campaign/config/0f002fd9978bd006e6b8d3077ebaf065/config.js"},"urlFragmentWhitelist":["edweek.org","topschooljobs.org","marketbrief.edweek.org"],"src":"https://c.lytics.io/api/experience/candidate/0f002fd9978bd006e6b8d3077ebaf065/config.js","polling":{}}},"poll":{},"qubit":{"dataLayerPull":{"disabled":true}},"salesforce":{"dmp":{"disabled":true}},"segments":{},"send":{"pageViewOnFirst":true},"taboola":{"dmp":{"disabled":true}},"tealium":{"dataLayerPull":{"disabled":true}},"thetradedesk":{"dsp":{"disabled":false}},"yahoo":{"datax":{"disabled":true}}};